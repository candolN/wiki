/* ============================================================
   CANDOLN WIKI MASTER CSS (CLEAN FIXED VERSION)
   ============================================================ */

/* ------------------------------------------------------------
   PART 1: 變數與基礎設定 (Base Setup)
   ------------------------------------------------------------ */
body {
    /* 定義紅色變數 */
    --ugo-red-rgb: 214, 40, 40; /* 火磚紅 #D62828 */
    --ugo-red: rgb(var(--ugo-red-rgb));
    --ugo-bg: #ffffff;
    --ugo-dot: #d0d0d0;
    --ugo-black: #111111;
    --ugo-shadow: 4px 4px 0px;
    
    /* 核彈修正：直接覆蓋 Obsidian 底層的高亮變數 */
    --text-highlight-bg: rgba(var(--ugo-red-rgb), 0.3) !important;

   
    /* 全局字體顏色 */
    --text-normal: var(--ugo-black) !important;
}

/* ------------------------------------------------------------
   PART 2: 基礎元件 (Images, Bold, Highlights)
   ------------------------------------------------------------ */
/* 圖片像素化 & 邊框 */
img {
    image-rendering: pixelated;
    border: 2px solid var(--ugo-black);
    box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
    display: block;
    margin: 10px auto;
}

/* 高亮筆修正 (殺死螢光黃) */
html body mark, 
html body .cm-highlight,
html body .markdown-rendered mark {
    background-color: rgba(var(--ugo-red-rgb), 0.3) !important;
    color: var(--ugo-red) !important;
    border-radius: 0px !important;
    padding: 0 2px !important;
    box-shadow: none !important;
}

/* 粗體字變紅 */
strong, b {
    color: var(--ugo-red) !important;
}



/* ------------------------------------------------------------
   PART 3: Callout 框框 (Ugomeemo Style)
   ------------------------------------------------------------ */
html body .callout,
html body .callout[data-callout="info"] {
    background-color: #fff !important;
    border: 2px solid var(--ugo-black) !important;
    border-left: 6px solid var(--ugo-red) !important;
    border-radius: 0 !important;
    box-shadow: var(--ugo-shadow) var(--ugo-black) !important;
    --callout-color: var(--ugo-red-rgb) !important;
    --callout-icon: var(--ugo-red-rgb) !important;
}

/* 強制 Icon 與標題變色 */
html body .callout .callout-icon,
html body .callout[data-callout="info"] .callout-icon {
    color: var(--ugo-red) !important;
    stroke: var(--ugo-red) !important;
    fill: var(--ugo-red) !important;
}

html body .callout .callout-title {
    color: var(--ugo-red) !important;
    font-weight: bold !important;
}

.callout:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px var(--ugo-black) !important;
    transition: all 0.1s step-end;
}

/* ------------------------------------------------------------
   PART 4: 特效動畫 (Animations)
   ------------------------------------------------------------ */
/* 4.1 瘋狂抖動 (Shake Crazy) */
@keyframes shake-crazy {
    0% { transform: translate(2px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(0px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(2px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(2px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
}

.shake-crazy {
    display: inline-block;
    animation: shake-crazy 0.5s infinite;
}

/* 4.2 紅光呼吸 (Red Breath) */
@keyframes breath-red-glow {
    0% { transform: scale(1); text-shadow: 0 0 2px rgba(214, 40, 40, 0.3); }
    50% { transform: scale(1.05); text-shadow: 0 0 15px rgba(214, 40, 40, 0.9), 0 0 5px rgba(214, 40, 40, 0.6); }
    100% { transform: scale(1); text-shadow: 0 0 2px rgba(214, 40, 40, 0.3); }
}

.breathing-red {
    display: inline-block;
    animation: breath-red-glow 3s infinite ease-in-out;
    color: #fff;
}

/* 4.3 慢速浮現 (Slow Appear) */
@keyframes appear-slow-anim {
    from { opacity: 0; }
    to { opacity: 1; }
}

.appear-slow {
    animation: appear-slow-anim 5s ease-in-out forwards;
}

/* ============================================================
   PART 5: 終極表格修復 (GLOBAL TABLE & BUTTON FIX)
   ============================================================ */

/* 1. 強制所有表格外框與背景 */
table {
    margin: 20px auto !important;
    width: 100% !important;
    border-collapse: collapse !important;
    border: 2px solid var(--ugo-black) !important;
    background-color: white !important;
}

/* 2. 強制所有格子內容置中 (包含 Landing Page 和普通頁面) */
th, td, .landing-page td {
    border: 2px solid var(--ugo-black) !important;
    padding: 15px !important;
    vertical-align: middle !important; /* 垂直置中 */
    text-align: center !important;     /* 水平置中 (這行最重要) */
}

/* 3. 表頭專屬樣式 */
th {
    background-color: var(--ugo-black) !important;
    color: #ffffff !important;
}

/* 4. 強制修復連結按鈕 (置中 + 黑框) */
/* 我們用非常具體的選擇器來確保覆蓋 */
table td a,
.landing-page td a,
a.internal-link {
    display: inline-block !important;
    margin: 4px auto !important;      /* 上下留白，左右自動置中 */
    padding: 5px 10px !important;
    background-color: #fff !important;
    border: 2px solid var(--ugo-black) !important;
    color: var(--ugo-black) !important;
    text-decoration: none !important;
    font-weight: bold !important;
    box-shadow: 2px 2px 0px rgba(0,0,0,0.1) !important;
    transition: all 0.1s !important;
}

/* 按鈕滑鼠互動 */
table td a:hover,
.landing-page td a:hover {
    background-color: var(--ugo-red) !important;
    color: white !important;
    transform: translate(2px, 2px) !important;
    box-shadow: 1px 1px 0px black !important;
}

/* 5. 強制圖片大小與置中 */
td img {
    display: block !important;
    margin: 0 auto !important;
    width: 50px !important;  /* 強制統一大小，解決 !50 失效問題 */
    height: auto !important;
}

/* ============================================================
   PART 6: 標題與 UI Icon 特別修正 (Header Icon Fix)
   ============================================================ */

/* 針對 H1 ~ H6 標題內部的所有圖片進行樣式重置 */
h1 img, h2 img, h3 img, h4 img, h5 img, h6 img {
    display: inline-block !important;  /* 關鍵：改回行內區塊，讓它能跟文字排在同一行 */
    vertical-align: middle !important; /* 關鍵：讓圖片跟文字垂直方向置中對齊 */
    
    /* 移除全域圖片樣式 */
    border: none !important;           /* 去掉黑框 */
    box-shadow: none !important;       /* 去掉陰影 */
    background: transparent !important;/* 確保背景透明 */
    
    /* 調整間距 */
    margin: 0 8px 0 0 !important;      /* 取消原本的 auto 置中，只在圖片右側留點空隙 */
    width: auto !important;            /* 避免被強制拉伸，或者你可以指定具體 px */
}

/* 如果你的網頁發布平台會把圖片包在 span 裡 (某些生成器會這樣)，可能需要這個補丁 */
h1 span.image-embed, h2 span.image-embed {
    display: inline-block !important;
}
