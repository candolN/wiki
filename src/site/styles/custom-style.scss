/* ============================================================
   CANDOLN WIKI MASTER CSS (MOBILE FIXED VERSION)
   ============================================================ */

/* ------------------------------------------------------------
   PART 1: è®Šæ•¸èˆ‡åŸºç¤è¨­å®š (Base Setup)
   ------------------------------------------------------------ */
body {
    --ugo-red-rgb: 214, 40, 40;
    --ugo-red: rgb(var(--ugo-red-rgb));
    --ugo-bg: #ffffff;
    --ugo-dot: #d0d0d0;
    --ugo-black: #111111;
    --ugo-shadow: 4px 4px 0px;
    --text-highlight-bg: rgba(var(--ugo-red-rgb), 0.3) !important;
    --text-normal: var(--ugo-black) !important;
}

/* ------------------------------------------------------------
   PART 2: åŸºç¤å…ƒä»¶ (Images, Bold, Highlights)
   ------------------------------------------------------------ */
/* 1. å…¨å±€åœ–ç‰‡åŸºç¤è¨­å®š */
img {
    /* é è¨­ä½¿ç”¨è‡ªå‹•æ¸²æŸ“ï¼Œé€™æ˜¯ GIF èƒ½å‹•çš„é—œéµ */
    image-rendering: auto; 
    image-rendering: -webkit-optimize-contrast; /* iOS å„ªåŒ– */
    border: 2px solid var(--ugo-black);
    box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
    display: block;
    margin: 10px auto;
}

/* 2. åªé‡å°ã€Œé GIFã€åœ–ç‰‡é–‹å•Ÿåƒç´ åŒ– (DOL é¢¨æ ¼) */
/* é€™æ¨£ PNG æœƒæ˜¯åƒç´ é¢¨ï¼Œä½† GIF ä¿æŒå¹³æ»‘æ¸²æŸ“ä»¥ç¢ºä¿æ’­æ”¾ */
img:not([src*=".gif"]) {
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
}

/* é«˜äº®ç­†ä¿®æ­£ */
html body mark, 
html body .cm-highlight,
html body .markdown-rendered mark {
    background-color: rgba(var(--ugo-red-rgb), 0.3) !important;
    color: var(--ugo-red) !important;
    border-radius: 0px !important;
    padding: 0 2px !important;
    box-shadow: none !important;
}

/* ç²—é«”å­—è®Šç´… */
strong, b {
    color: var(--ugo-red) !important;
}

/* ------------------------------------------------------------
   PART 3: Callout æ¡†æ¡† (Ugomeemo Style)
   ------------------------------------------------------------ */
html body .callout,
html body .callout[data-callout="info"] {
    background-color: #fff !important;
    border: 2px solid var(--ugo-black) !important;
    border-left: 6px solid var(--ugo-red) !important;
    border-radius: 0 !important;
    box-shadow: var(--ugo-shadow) var(--ugo-black) !important;
    --callout-color: var(--ugo-red-rgb) !important;
    --callout-icon: var(--ugo-red-rgb) !important;
}

html body .callout .callout-icon,
html body .callout[data-callout="info"] .callout-icon {
    color: var(--ugo-red) !important;
    stroke: var(--ugo-red) !important;
    fill: var(--ugo-red) !important;
}

html body .callout .callout-title {
    color: var(--ugo-red) !important;
    font-weight: bold !important;
}

.callout:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px var(--ugo-black) !important;
    transition: all 0.1s step-end;
}

/* ------------------------------------------------------------
   PART 4: ç‰¹æ•ˆå‹•ç•« (Animations)
   ------------------------------------------------------------ */
@keyframes shake-crazy {
    0% { transform: translate(2px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(0px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(2px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(2px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
}

.shake-crazy {
    display: inline-block;
    animation: shake-crazy 0.5s infinite;
}

@keyframes breath-red-glow {
    0% { transform: scale(1); text-shadow: 0 0 2px rgba(214, 40, 40, 0.3); }
    50% { transform: scale(1.05); text-shadow: 0 0 15px rgba(214, 40, 40, 0.9), 0 0 5px rgba(214, 40, 40, 0.6); }
    100% { transform: scale(1); text-shadow: 0 0 2px rgba(214, 40, 40, 0.3); }
}

.breathing-red {
    display: inline-block;
    animation: breath-red-glow 3s infinite ease-in-out;
    color: #fff;
}

@keyframes appear-slow-anim {
    from { opacity: 0; }
    to { opacity: 1; }
}

.appear-slow {
    animation: appear-slow-anim 5s ease-in-out forwards;
}

/* ============================================================
   PART 5: çµ‚æ¥µè¡¨æ ¼ä¿®å¾©
   ============================================================ */
table {
    margin: 20px auto !important;
    width: 100% !important;
    border-collapse: collapse !important;
    border: 2px solid var(--ugo-black) !important;
    background-color: white !important;
}

th, td, .landing-page td {
    border: 2px solid var(--ugo-black) !important;
    padding: 15px !important;
    vertical-align: middle !important;
    text-align: center !important;
}

th {
    background-color: var(--ugo-black) !important;
    color: #ffffff !important;
}

table td a,
.landing-page td a,
a.internal-link {
    display: inline-block !important;
    margin: 4px auto !important;
    padding: 5px 10px !important;
    background-color: #fff !important;
    border: 2px solid var(--ugo-black) !important;
    color: var(--ugo-black) !important;
    text-decoration: none !important;
    font-weight: bold !important;
    box-shadow: 2px 2px 0px rgba(0,0,0,0.1) !important;
    transition: all 0.1s !important;
}

table td a:hover,
.landing-page td a:hover {
    background-color: var(--ugo-red) !important;
    color: white !important;
    transform: translate(2px, 2px) !important;
    box-shadow: 1px 1px 0px black !important;
}

td img {
    display: block !important;
    margin: 0 auto !important;
    width: 50px !important;
    height: auto !important;
}

/* ============================================================
   PART 6: æ¨™é¡Œèˆ‡ UI Icon ç‰¹åˆ¥ä¿®æ­£
   ============================================================ */
h1 img, h2 img, h3 img, h4 img, h5 img, h6 img {
    display: inline-block !important;
    vertical-align: bottom !important;
    height: 1.5em !important;
    width: auto !important;
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
    margin: 0 10px 0 0 !important;
}

h1 span.image-embed, h2 span.image-embed {
    display: inline-block !important;
    height: auto !important;
}

/* ==============================================
   PART 7: LOCKED CONTENT
   ============================================== */
a.internal-link.locked,
.locked a {
    pointer-events: none;
    cursor: not-allowed;
    opacity: 0.5;
    position: relative;
    text-decoration: line-through !important;
}

a.internal-link.locked::after,
.locked a::after {
    content: " ğŸ”’";
    font-size: 0.8em;
}

/* ============================================================
   PART 8 (FINAL V5 FIXED): éµè…•é–æ­»ç‰ˆ (ç„¡å·¢ç‹€èªæ³•éŒ¯èª¤ç‰ˆ)
   ============================================================ */

/* ------------------------------------------------------------
   1. è¡¨æ ¼å…§çš„ Icon (Table Priority)
   ğŸ”´ ä¿®æ­£ï¼šæ‹†é™¤å·¢ç‹€å¯«æ³• (&)ï¼Œæ”¹ç‚ºæ¨™æº– CSSï¼Œç¢ºä¿æ‰‹æ©Ÿè®€å¾—åˆ°
   ------------------------------------------------------------ */
html body table td img[src*="icon-"],
html body .landing-page td img[src*="icon-"] {
    width: 50px !important;
    max-width: 50px !important;
    min-width: 0 !important;
    height: auto !important;
    display: block !important;
    margin: 0 auto !important;
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
    /* è¡¨æ ¼å…§ Icon ä¸éœ€è¦åƒç´ åŒ–ï¼Œä¿æŒæ¸…æ™° */
    image-rendering: auto !important; 
}

/* ------------------------------------------------------------
   2. å…§æ–‡ä¸­çš„ Icon (Body Text)
   ------------------------------------------------------------ */
html body img[src*="icon-"] {
    display: inline-block !important;
    vertical-align: middle !important; 
    height: 1.8em !important; 
    width: auto !important;
    margin: 0 5px !important;
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
}

/* ------------------------------------------------------------
   3. ç‰¹æ®Šè¦å‰‡ï¼šClean æ¨¡å¼ (ç´”æ·¨åŸåœ–)
   ------------------------------------------------------------ */
img[src*="clean-"] {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
    image-rendering: auto !important; /* clean æ¨¡å¼ä¹Ÿå¼·åˆ¶å¹³æ»‘ */
}

/* ------------------------------------------------------------
   4. GIF æœ€çµ‚æ•‘å‘½å€ (GIF Reset - Mobile Optimized)
   ğŸ”´ ä¿®æ­£ï¼šç¢ºä¿é€™æ®µä¸€å®šæœƒè¢«è®€å–
   ------------------------------------------------------------ */
img[src*=".gif"] {
    /* 1. å¤–è§€é‡ç½® */
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
    
    /* 2. æ¸²æŸ“æ¨¡å¼ä¿®æ­£ (çµ•å°é—œéµ) */
    image-rendering: auto !important;      
    
    /* 3. å¼·åˆ¶ GPU ç¡¬é«”åŠ é€Ÿ (æ‰‹æ©Ÿå¿…å‚™) */
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
    backface-visibility: hidden; /* é˜²æ­¢é–ƒçˆ */
    
    /* 4. å°ºå¯¸èˆ‡é¡¯ç¤ºä¿è­· */
    max-width: 100% !important;
    height: auto !important;
    opacity: 1 !important;
    
    /* 5. å‘ŠçŸ¥ç€è¦½å™¨é€™äº›å±¬æ€§æœƒè®Šå‹•ï¼Œè«‹ä¸è¦å„ªåŒ–éé ­ */
    will-change: transform; 
}
